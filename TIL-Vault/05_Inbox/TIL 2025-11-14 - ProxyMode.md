---
created: 2025-11-14 23:09
updated: 2025-11-14 23:09
status:
  - draft
tags:
  - ProxyMode
source:
---
# π“ TIL 2025-11-14 - ProxyMode

> **κ΄€λ ¨ μ£Όμ :** [[MOC_TBD]] 

## π€ κ°μ” λ° ν•µμ‹¬ (Summary)

(κ°€μ¥ μ¤‘μ”ν• ν•µμ‹¬ λ‚΄μ©μ„ 3μ¤„ λ‚΄μ™Έλ΅ μ”μ•½ν•©λ‹λ‹¤.)

---

## π“ μƒμ„Έ λ‚΄μ© (Deep Dive)

## π› οΈ `proxyMode` κ°’μ μΆ…λ¥ λ° μ‚¬μ© μ‹μ 

`proxyMode`λ” `@Scope` μ• λ…Έν…μ΄μ…κ³Ό ν•¨κ» μ‚¬μ©λμ–΄, μ‹¤μ  Bean κ°μ²΄ λ€μ‹  **ν”„λ΅μ‹ κ°μ²΄**λ¥Ό μ£Όμ…ν• μ§€ μ—¬λ¶€μ™€ κ·Έ λ°©μ‹μ„ κ²°μ •ν•©λ‹λ‹¤.

|**ScopedProxyMode κ°’**|**μ„¤λ…**|**μ‚¬μ© μ‹μ **|
|---|---|---|
|**`DEFAULT`**|κΈ°λ³Έκ°’μ΄λ©°, `NO`μ™€ λ™μΌν•κ² μ‘λ™ν•©λ‹λ‹¤.|`proxyMode`λ¥Ό λ…μ‹ν•μ§€ μ•μ•μ„ λ• μ‚¬μ©λ©λ‹λ‹¤.|
|**`NO`**|**ν”„λ΅μ‹λ¥Ό μƒμ„±ν•μ§€ μ•μµλ‹λ‹¤.** μ‹¤μ  Bean κ°μ²΄μ— λ€ν• μ°Έμ΅°λ¥Ό μ§μ ‘ μ£Όμ…ν•©λ‹λ‹¤.|**`Singleton` Bean** λλ” μ¤μ½”ν”„ λ¬Έμ κ°€ λ°μƒν•μ§€ μ•λ” κ²½μ° (μ: Request Beanμ΄ Request Beanμ„ μ°Έμ΅°)|
|**`TARGET_CLASS`**|**ν΄λμ¤ κΈ°λ°μ ν”„λ΅μ‹**λ¥Ό μƒμ„±ν•©λ‹λ‹¤.|νƒ€κ² Beanμ΄ **μΈν„°νμ΄μ¤κ°€ μ—†λ” μΌλ° ν΄λμ¤**μ΄κ±°λ‚, CGLIBλ¥Ό μ‚¬μ©ν•μ—¬ μƒμ† κΈ°λ°μ ν”„λ΅μ‹λ¥Ό μƒμ„±ν•΄μ•Ό ν•  λ• μ‚¬μ©λ©λ‹λ‹¤. (κ°€μ¥ μΌλ°μ μΈ μ„ νƒ)|
|**`INTERFACES`**|**JDK λ™μ  ν”„λ΅μ‹**λ¥Ό μƒμ„±ν•©λ‹λ‹¤.|νƒ€κ² Beanμ΄ **μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„**ν•κ³  μμ„ λ• μ‚¬μ©λ©λ‹λ‹¤. ν”„λ΅μ‹λ” νƒ€κ² Beanμ΄ κµ¬ν„ν• μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•©λ‹λ‹¤.|

## π“ μ£Όμ” λ¨λ“ μ„¤λ…

### 1. `NO` (κΈ°λ³Έκ°’)

ν”„λ΅μ‹λ¥Ό μƒμ„±ν•μ§€ μ•κ³ , μ»¨ν…μ΄λ„λ” μ£Όμ… μ‹μ μ— **μ‹¤μ  Bean κ°μ²΄**λ¥Ό μ°Ύμ•„μ„ μ£Όμ…ν•©λ‹λ‹¤.

- **λ¬Έμ μ :** μλ…μ΄ κΈ΄ `Singleton` Beanμ΄ μλ…μ΄ μ§§μ€ `Request` Beanμ„ μ°Έμ΅°ν•  κ²½μ°, `Request` Beanμ΄ μ†λ©Έλ ν›„μ—λ„ `Singleton`μ€ **μ‚¬λΌμ§„ κ°μ²΄λ¥Ό κ³„μ† μ°Έμ΅°**ν•κ² λμ–΄ λ™μ‹μ„± λ¬Έμ κ°€ λ°μƒν•©λ‹λ‹¤. λ”°λΌμ„ `request`λ‚ `session` μ¤μ½”ν”„μ—λ” κ±°μ μ‚¬μ©λμ§€ μ•μµλ‹λ‹¤.
    

### 2. `TARGET_CLASS` (ν΄λμ¤ κΈ°λ° ν”„λ΅μ‹)

κ°€μ¥ ν”ν•κ² μ‚¬μ©λλ©°, Springμ΄ **CGLIB** λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ **νƒ€κ² ν΄λμ¤λ¥Ό μƒμ†λ°›λ” ν•νƒ**μ ν”„λ΅μ‹ κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

- `Singleton` Beanμ— μ΄ ν”„λ΅μ‹λ¥Ό μ£Όμ…ν•λ©΄, ν”„λ΅μ‹λ” λ©”μ„λ“ νΈμ¶ μ‹ **ν„μ¬ HTTP μ”μ²­μ— ν•΄λ‹Ήν•λ” μ‹¤μ  Bean**μ„ μ°Ύμ•„ μ„μ„(Delegate)ν•©λ‹λ‹¤.
    
- **μ–Έμ  μ‚¬μ©?** Beanμ΄ **μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•μ§€ μ•μ•μ„ λ•** ν•„μλ΅ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. μΈν„°νμ΄μ¤ κµ¬ν„ μ—¬λ¶€μ™€ μƒκ΄€μ—†μ΄ κ°€μ¥ λ²”μ©μ μΌλ΅ μ‚¬μ©λ©λ‹λ‹¤.
    

### 3. `INTERFACES` (μΈν„°νμ΄μ¤ κΈ°λ° ν”„λ΅μ‹)

Springμ΄ **JDK λ™μ  ν”„λ΅μ‹** κΈ°μ μ„ μ‚¬μ©ν•μ—¬ νƒ€κ² Beanμ΄ κµ¬ν„ν• **μΈν„°νμ΄μ¤λ¥Ό λ€μ‹  κµ¬ν„**ν•λ” ν”„λ΅μ‹ κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

- **μ–Έμ  μ‚¬μ©?** νƒ€κ² Beanμ΄ **λ°λ“μ‹ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„**ν•κ³  μμ–΄μ•Ό ν•λ©°, DIλ¥Ό λ°›μ„ λ• **μΈν„°νμ΄μ¤ νƒ€μ…**μΌλ΅ λ°›μ•„μ•Ό ν•©λ‹λ‹¤.
    
- **μ¥μ :** μμ μλ°”μ μΈν„°νμ΄μ¤ κΈ°λ° ν”„λ΅μ‹μ΄λ―€λ΅ CGLIBλ³΄λ‹¤ μ¤λ²„ν—¤λ“κ°€ μ μ„ μ μμ§€λ§, μ‹¤μ  μ½”λ“μ—μ„λ” `TARGET_CLASS`λ¥Ό λ” μ„ νΈν•λ” κ²½ν–¥μ΄ μμµλ‹λ‹¤.
    

### μ”μ•½: μ„ νƒ κΈ°μ¤€

λ€λ¶€λ¶„μ κ²½μ°, μ¤μ½”ν”„ λ¬Έμ κ°€ λ°μƒν•λ” μ§§μ€ μλ…μ Beanμ„ μ •μν•  λ•λ” λ‹¤μκ³Ό κ°™μ΄ μ„ νƒν•  μ μμµλ‹λ‹¤.

- **μΈν„°νμ΄μ¤ μ λ¬΄ λ¬΄κ΄€, κ°„κ²°μ„± μ„ νΈ:** `proxyMode = ScopedProxyMode.TARGET_CLASS`
    
- **μΈν„°νμ΄μ¤λ¥Ό ν†µν• μ¶”μƒν™”κ°€ λ…ν™•ν•  λ•:** `proxyMode = ScopedProxyMode.INTERFACES` (λ‹¨, μ£Όμ… μ‹ μΈν„°νμ΄μ¤ νƒ€μ…μΌλ΅ λ°›μ•„μ•Ό ν•¨)